(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(8),r=a.n(i),l=(a(15),a(2)),c=a(3),o=a(5),d=a(4),u=a(1),m=a(6),h=(a(16),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={average:null,collapsed:!0,tag:"",tags:[]},a.getAverage=a.getAverage.bind(Object(u.a)(a)),a.handleClick=a.handleClick.bind(Object(u.a)(a)),a.handleInput=a.handleInput.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.fetchTags=a.fetchTags.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({average:this.getAverage()+"%"}),this.fetchTags()}},{key:"getAverage",value:function(){for(var e=this.props.student.grades,t=0,a=0;a<e.length;a++)t+=parseInt(e[a]);return t/e.length}},{key:"handleClick",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"handleInput",value:function(e){this.setState({tag:e.currentTarget.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.tag,a="tags".concat(this.props.student.id);sessionStorage.getItem(a)||sessionStorage.setItem(a,""),""===sessionStorage.getItem(a)?sessionStorage.setItem(a,sessionStorage.getItem(a).concat("".concat(t))):sessionStorage.setItem(a,sessionStorage.getItem(a).concat(" ".concat(t))),console.log(document.querySelectorAll(".tag-field")),document.querySelectorAll(".tag-field").forEach(function(e){return e.value=""}),this.fetchTags()}},{key:"fetchTags",value:function(){var e="tags".concat(this.props.student.id),t=(null===sessionStorage.getItem(e)?"":sessionStorage.getItem(e).trim()).split(" ");""===t[0]&&(t=[]),this.setState({tags:t})}},{key:"render",value:function(){var e=s.a.createElement("button",{onClick:this.handleClick,className:"button"},"+"),t=s.a.createElement("button",{onClick:this.handleClick,className:"button"},"-"),a=s.a.createElement("div",{className:"scores"},this.props.student.grades.map(function(e,t){return s.a.createElement("li",{className:"grades",key:t},s.a.createElement("div",{className:"test-score"},s.a.createElement("div",null,"Test ",t+1,":"),s.a.createElement("div",{className:"grade"},e,"%")))}),s.a.createElement("div",{className:"tags"},this.state.tags.map(function(e){return s.a.createElement("div",{className:"tag"},e)})),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",onChange:this.handleInput,className:"tag-field",placeholder:"Add a tag"})));return s.a.createElement("li",{className:"student",key:this.props.student.id},s.a.createElement("img",{src:this.props.student.pic,alt:"pic",className:"pic"}),s.a.createElement("div",{className:"student-info"},s.a.createElement("div",{className:"top"},s.a.createElement("h3",{className:"name"},this.props.student.firstName.toUpperCase()," ",this.props.student.lastName.toUpperCase()),this.state.collapsed&&e,!this.state.collapsed&&t),s.a.createElement("div",{className:"info"},s.a.createElement("div",{className:"info-line"},"Email: ",this.props.student.email),s.a.createElement("div",{className:"info-line"},"Company: ",this.props.student.company),s.a.createElement("div",{className:"info-line"},"Skill: ",this.props.student.skill),s.a.createElement("div",{className:"info-line"},"Average: ",this.state.average),!this.state.collapsed&&a)))}}]),t}(s.a.Component)),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={rawData:[],filteredData:[],nameFilteredData:[],tagFilteredData:[],filtered:!1,nameQuery:"",tagQuery:""},a.nameFilteredData=[],a.tagFilteredData=[],a.finalFilteredData=[],a.fetchRawData=a.fetchRawData.bind(Object(u.a)(a)),a.handleInput=a.handleInput.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchRawData()}},{key:"fetchRawData",value:function(){var e=this;fetch("https://my-json-server.typicode.com/ndo277/studentdb/db").then(function(e){return e.json()}).then(function(t){return e.setState({rawData:t.students})})}},{key:"handleInput",value:function(e){var t=this;if("name-search-field"===e.currentTarget.classList[0]){this.setState({nameQuery:e.currentTarget.value});var a=this.state.rawData,n=e.currentTarget.value.toLowerCase();a=a.filter(function(e){return-1!==(e.firstName.toLowerCase()+e.lastName.toLowerCase()).indexOf(n)}),this.nameFilteredData=a}if("tag-search-field"===e.currentTarget.classList[0]){this.setState({tagQuery:e.currentTarget.value});var s=this.state.rawData,i=e.currentTarget.value.toLowerCase();s=s.filter(function(e){var t="tags".concat(e.id),a=sessionStorage.getItem(t);return null===a&&(a=""),-1!==a.indexOf(i)}),this.tagFilteredData=s}""===document.getElementById("name-search").value?this.finalFilteredData=this.tagFilteredData:""===document.getElementById("tag-search").value?this.finalFilteredData=this.nameFilteredData:this.finalFilteredData=this.nameFilteredData.filter(function(e){return t.tagFilteredData.includes(e)}),this.setState({filteredData:this.finalFilteredData,filtered:!0})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",{className:"title"},"STUDENTDB"),s.a.createElement("div",{className:"git"},s.a.createElement("a",{href:"https://github.com/ndo277/studentdb/",className:"link",target:"_blank",rel:"noopener noreferrer"},"[Github]")),s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"student-index"},s.a.createElement("div",{className:"name-filter"},s.a.createElement("input",{type:"text",placeholder:"Search by name",className:"name-search-field",id:"name-search",onChange:this.handleInput})),s.a.createElement("div",{className:"name-filter"},s.a.createElement("input",{type:"text",placeholder:"Search by tags",className:"tag-search-field",id:"tag-search",onChange:this.handleInput})),!this.state.filtered&&this.state.rawData.map(function(e){return s.a.createElement(h,{student:e,key:e.id})}),this.state.filtered&&this.state.filteredData.map(function(e){return s.a.createElement(h,{student:e,key:e.id})}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.1ba41557.chunk.js.map